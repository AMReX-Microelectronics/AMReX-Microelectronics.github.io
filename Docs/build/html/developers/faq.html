<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ &mdash; MicroEleX 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroEleX
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/artemis.html">ARTEMIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/eleqtroneX.html">ELEQTRONeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/ferrox.html">FerroX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/magnex.html">MagneX</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USAGE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/run_artemis.html">Run ARTEMIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/run_eleqtronex.html">Run ELEQTRONeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/run_ferrox.html">Run FerroX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/run_magnex.html">Run MagneX</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DATA ANALYSIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dataanalysis/formats.html">Output Formats and Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataanalysis/yt.html">yt-project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EPILOGUE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Funding and Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroEleX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FAQ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developers/faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq">
<span id="development-faq"></span><h1>FAQ<a class="headerlink" href="#faq" title="Link to this heading"></a></h1>
<p>This section lists frequently asked developer questions.</p>
<section id="what-is-0-0-rt">
<h2>What is <code class="docutils literal notranslate"><span class="pre">0.0_rt</span></code>?<a class="headerlink" href="#what-is-0-0-rt" title="Link to this heading"></a></h2>
<p>It’s a C++ <a class="reference external" href="https://en.cppreference.com/w/cpp/language/floating_literal">floating-point literal</a> for zero of type <code class="docutils literal notranslate"><span class="pre">amrex::Real</span></code>.</p>
<p>We use <a class="reference external" href="https://en.cppreference.com/w/cpp/language/expressions#Literals">literals</a> to define constants with a specific type, in that case the zero-value.
There is also <code class="docutils literal notranslate"><span class="pre">0.0_prt</span></code>, which is a literal zero of type <code class="docutils literal notranslate"><span class="pre">amrex::ParticleReal</span></code>.
In std C++, you know: <code class="docutils literal notranslate"><span class="pre">0.0</span></code> (literal <code class="docutils literal notranslate"><span class="pre">double</span></code>), <code class="docutils literal notranslate"><span class="pre">0.0f</span></code> (literal <code class="docutils literal notranslate"><span class="pre">float</span></code>) and <code class="docutils literal notranslate"><span class="pre">0.0L</span></code> (literal <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code>).
We do not use use those, so that we can configure floating point precision at compile time and use different precision for fields (<code class="docutils literal notranslate"><span class="pre">amrex::Real</span></code>) and particles (<code class="docutils literal notranslate"><span class="pre">amrex::ParticleReal</span></code>).</p>
<p>You can also write things like <code class="docutils literal notranslate"><span class="pre">42.0_prt</span></code> if you like to have another value than zero.</p>
<p>We use these <a class="reference external" href="https://en.cppreference.com/w/cpp/language/user_literal">C++ user literals</a> (<a class="reference external" href="https://github.com/AMReX-Codes/amrex/pull/577">[1]</a>, <a class="reference external" href="https://github.com/AMReX-Codes/amrex/pull/578">[2]</a>, <a class="reference external" href="https://github.com/AMReX-Codes/amrex/pull/869">[3]</a>), because we want to avoid that double operations, i.e., <code class="docutils literal notranslate"><span class="pre">3.</span> <span class="pre">/</span> <span class="pre">4.</span></code>, implicit casts, or even worse integer operations, i.e., <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">/</span> <span class="pre">4</span></code>, sneak into the code base and make results wrong or slower.</p>
</section>
<section id="do-you-worry-about-using-size-t-vs-uint-vs-int-for-indexing-things">
<h2>Do you worry about using <code class="docutils literal notranslate"><span class="pre">size_t</span></code> vs. <code class="docutils literal notranslate"><span class="pre">uint</span></code> vs. <code class="docutils literal notranslate"><span class="pre">int</span></code> for indexing things?<a class="headerlink" href="#do-you-worry-about-using-size-t-vs-uint-vs-int-for-indexing-things" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://en.cppreference.com/w/cpp/types/size_t">std::size_t</a> is the C++ unsigned int type for all container sizes.</p>
<p>Close to but not necessarily <code class="docutils literal notranslate"><span class="pre">uint</span></code>, <a class="reference external" href="https://en.cppreference.com/w/cpp/language/types">depends on the platform</a>.
For “hot” inner loops, you want to use <code class="docutils literal notranslate"><span class="pre">int</span></code> instead of an unsigned integer type. Why? Because <code class="docutils literal notranslate"><span class="pre">int</span></code> has no handling for overflows (it is intentional, undefined behavior in C++), which allows compilers to vectorize easier, because they don’t need to check for an overflow every time one reaches the control/condition section of the loop.</p>
<p>C++20 will also add support for <a class="reference external" href="https://en.cppreference.com/w/cpp/iterator/size">ssize</a> (signed size), but we currently require C++17 for builds.
Thus, sometimes you need to <code class="docutils literal notranslate"><span class="pre">static_cast&lt;int&gt;(...)</span></code>.</p>
</section>
<section id="what-does-std-make-unique-do">
<h2>What does <code class="docutils literal notranslate"><span class="pre">std::make_unique</span></code> do?<a class="headerlink" href="#what-does-std-make-unique-do" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique">make_unique</a> is a <a class="reference external" href="https://refactoring.guru/design-patterns/factory-method/cpp/example">C++ factory method</a> that creates a <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;T&gt;</span></code>.</p>
<p>Follow-up: <code class="docutils literal notranslate"><span class="pre">Why</span> <span class="pre">use</span> <span class="pre">this</span> <span class="pre">over</span> <span class="pre">just</span> <span class="pre">*my_ptr</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">&lt;class&gt;</span></code>?</p>
<p>Because so-called <a class="reference external" href="https://en.cppreference.com/book/intro/smart_pointers">smart-pointers</a>, such as <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;T&gt;</span></code>, do delete themselves automatically when they run out of scope.
That means: no memory leaks, because you cannot forget to <code class="docutils literal notranslate"><span class="pre">delete</span></code> them again.</p>
</section>
<section id="why-name-header-files-h-instead-of-h">
<h2>Why name header files <code class="docutils literal notranslate"><span class="pre">.H</span></code> instead of <code class="docutils literal notranslate"><span class="pre">.h</span></code>?<a class="headerlink" href="#why-name-header-files-h-instead-of-h" title="Link to this heading"></a></h2>
<p>This is just a <a class="reference internal" href="contributing.html#developers-contributing-style-conventions"><span class="std std-ref">convention that we follow through the code base</span></a>, which slightly simplifies what we need to parse in our various build systems.
We inherited that from AMReX.
Generally speaking, C++ file endings can be arbitrary, we just keep them consistent to avoid confusion in the code base.</p>
<p>To be explicit and avoid confusion (with C/ObjC), we might change them all to <code class="docutils literal notranslate"><span class="pre">.hpp</span></code> and <code class="docutils literal notranslate"><span class="pre">.cpp</span></code>/<code class="docutils literal notranslate"><span class="pre">.cxx</span></code> at some point, but for now <code class="docutils literal notranslate"><span class="pre">.H</span></code> and <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> is what we do (as in AMReX).</p>
</section>
<section id="what-are-include-fwd-h-and-include-fwd-h-files">
<h2>What are <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;..._fwd.H&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;...Fwd.H&gt;</span></code> files?<a class="headerlink" href="#what-are-include-fwd-h-and-include-fwd-h-files" title="Link to this heading"></a></h2>
<p>These are <a class="reference external" href="https://en.wikipedia.org/wiki/Forward_declaration">C++ forward declarations</a>.
In C++, <code class="docutils literal notranslate"><span class="pre">#include</span></code> statements copy the referenced header file <em>literally</em> into place, which can increase the compile time of a <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file to an object file significantly, especially with transitive header files including each other.</p>
<p>In order to reduce compile time, we define <a class="reference internal" href="repo_organization.html#developers-cpp-includes-fwd"><span class="std std-ref">forward declarations in WarpX and AMReX</span></a> for commonly used, large classes.
The C++ standard library also uses that concept, e.g., in <a class="reference external" href="https://en.cppreference.com/w/cpp/header/iosfwd">iosfwd</a>.</p>
</section>
<section id="what-does-const-int-i-buffer-mean-in-argument-list">
<h2>What does const int <code class="docutils literal notranslate"><span class="pre">/*i_buffer*/</span></code> mean in argument list?<a class="headerlink" href="#what-does-const-int-i-buffer-mean-in-argument-list" title="Link to this heading"></a></h2>
<p>This is often seen in a derived class, overwriting an interface method.
It means we do not name the parameter because we do not use it when we overwrite the interface.
But we add the name as a comment <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></code> so that we know what we ignored when looking at the definition of the overwritten method.</p>
</section>
<section id="what-is-pinned-memory">
<h2>What is Pinned Memory?<a class="headerlink" href="#what-is-pinned-memory" title="Link to this heading"></a></h2>
<p>We need pinned aka “page locked” host memory when we:</p>
<ul class="simple">
<li><p>do asynchronous copies between the host and device</p></li>
<li><p>want to write to CPU memory from a GPU kernel</p></li>
</ul>
<p>A typical use case is initialization of our (filtered/processed) output routines.
AMReX provides pinned memory via the <code class="docutils literal notranslate"><span class="pre">amrex::PinnedArenaAllocator</span></code> , which is the last argument passed to constructors of <code class="docutils literal notranslate"><span class="pre">ParticleContainer</span></code> and <code class="docutils literal notranslate"><span class="pre">MultiFab</span></code>.</p>
<p>Read more on this here: <a class="reference external" href="https://developer.nvidia.com/blog/how-optimize-data-transfers-cuda-cc/">How to Optimize Data Transfers in CUDA C/C++</a> (note that pinned memory is a host memory feature and works with all GPU vendors we support)</p>
<p>Bonus: underneath the hood, asynchronous MPI communications also pin and unpin memory.
One of the benefits of GPU-aware MPI implementations is, besides the possibility to use direct device-device transfers, that MPI and GPU API calls <a class="reference external" href="https://www.open-mpi.org/community/lists/users/2012/11/20659.php">are aware of each others’ pinning ambitions</a> and do not create <a class="reference external" href="https://github.com/ComputationalRadiationPhysics/picongpu/pull/438">data races to unpin the same memory</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2024, MicroEleX collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>